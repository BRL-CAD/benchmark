<!DOCTYPE html>
<html>
<head>
    <title>Experimentation with Flot</title>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.flot.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.flot.axislabels.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.flot.categories.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.flot.tooltip.min.js"></script>
    <link href="{{ STATIC_URL }}css/style-flot.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Unica+One' rel='stylesheet' type='text/css'>
</head>
<body>
<div class="wrapper" style="background-color: #363638;width: 900px;">
    <h2 id="heading" style="text-align: center; font-family: 'Unica One'; color: #EFEFF2;">{{ plotname }}</h2>
    <div id="chart" style="width:800px; height:300px;"></div>
    </div>
</body>
<script>
    var options = {
    series: {
        color: "#FFFFFF",
        lines:{
            show: false,
            color: "#2B908F"
        },
        points:{
            show: false
        },
         bars: { show: true,
            fill: true,
            fillColor: "#2B908F",
            horizontal: false,
            barWidth: 0.2,
            align: "center"
        }
    },

    axisLabels: {
            show: true
        },

    xaxis:{
        mode: "categories",
        axisLabel: "",
        axisLabelUseCanvas: true,
        axisLabelFontFamily: "Unica One",
        axisLabelFontSizePixels: 18,
        axisLabelColour: "#EFEFF2",
        font:{
            color: "#EFEFF2",
            family: "Unica One"
        }
    },

    yaxis:{
        //mode: "categories",
        font:{
            family: "Unica One",
            color: "#EFEFF2"
        },
        axisLabel: "",
        axisLabelUseCanvas: true,
        axisLabelFontFamily: "Unica One",
        axisLabelFontSizePixels: 18,
        axisLabelColour: "#EFEFF2"
    },
    grid:{
        backgroundColor: "#353536",
        color: "#B6B6B9",
        hoverable: true
    },
    tooltip: true,
    tooltipOpts: {
        content: "%x | %y",
        defaultTheme: false
    }
};

    var data = [{}];

    $(document).ready(function(){
        $.getJSON("/plots/{{ plotname }}/data/", function(json){
            data[0].data = json.values;
            console.log(data);
            if(json.chart_type == "bar"){
                options.series.bars.show = true;
                options.series.bars.barWidth = 0.3;
            }
            if(json.chart_type == "line"){
                options.series.lines.show = true;
                options.series.points.show = true;
            }
            if(json.series_type == "single"){
                data[0].data = json.values;
            }
            options.xaxis.axisLabel = json.xaxis_title;
            options.yaxis.axisLabel = json.yaxis_title;
            $.plot($("#chart"), data, options);
            $("#heading").text(json.chart_title);
        });
        //console.log(data);
    });
</script>
</html>